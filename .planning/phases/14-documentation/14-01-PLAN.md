---
phase: 14-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [COMPONENT_GUIDE.md, NARRATIVE_EDITING_GUIDE.md]
autonomous: true

must_haves:
  truths:
    - "Users can learn about all v4.1 GUI components and how to use them"
    - "Users can understand the drag-and-drop narrative editing workflow"
  artifacts:
    - path: "COMPONENT_GUIDE.md"
      provides: "Documentation for 13+ GUI components with usage examples"
      min_lines: 400
      contains: "power-drawer"
    - path: "NARRATIVE_EDITING_GUIDE.md"
      provides: "Documentation for drag-and-drop narrative editing"
      min_lines: 100
      contains: "drag-and-drop"
  key_links:
    - from: "COMPONENT_GUIDE.md"
      to: "gui/js/components/"
      via: "references actual component files"
      pattern: "gui/js/components/"
    - from: "NARRATIVE_EDITING_GUIDE.md"
      to: "narrative-tree-editor.js"
      via: "references component implementation"
      pattern: "narrative-tree-editor"
---

<objective>
Create comprehensive documentation for GUI components and narrative editing workflow.

Purpose: Enable users to understand and use all v4.1 GUI features built in Phases 8-12.
Output: COMPONENT_GUIDE.md and NARRATIVE_EDITING_GUIDE.md with examples and usage instructions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Codebase context
@.planning/codebase/STRUCTURE.md
@.planning/codebase/CONVENTIONS.md

# GUI components built in Phases 8-12
@gui/js/components/power-drawer.js
@gui/js/components/layer-switcher.js
@gui/js/components/arc-card.js
@gui/js/components/conflict-card.js
@gui/js/components/causality-graph.js
@gui/js/components/setup-payoff-list.js
@gui/js/components/narrative-tree-editor.js
@gui/js/components/reader-knowledge-tracker.js
@gui/js/components/dramatic-irony-panel.js
@gui/js/components/relationship-map.js
@gui/js/components/scene-editor.js
@gui/js/components/theme-card.js
@gui/js/components/motif-card.js

# GUI state management
@gui/js/state.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create COMPONENT_GUIDE.md</name>
  <files>COMPONENT_GUIDE.md</files>
  <action>
    Create comprehensive component guide documenting all 13+ v4.1 GUI components.

    Structure:
    1. Introduction - What components exist, how to use guide
    2. Core Infrastructure Components (Phase 8):
       - power-drawer.js: Purpose, API (show/hide/setContent), usage example
       - layer-switcher.js: Purpose, API (updateViewMode), usage example
    3. Logic Visualization Components (Phase 9):
       - arc-card.js: Purpose, API (render with arc data), usage example
       - conflict-card.js: Purpose, API (render with conflict data), usage example
       - causality-graph.js: Purpose, API (renderGraph with depth), usage example
       - setup-payoff-list.js: Purpose, API (renderList), usage example
       - theme-card.js: Purpose, API
       - motif-card.js: Purpose, API
    4. Narrative Editing Components (Phase 10):
       - narrative-tree-editor.js: Purpose, API (render/setupDragHandlers), usage example
    5. Epistemic Components (Phase 11):
       - reader-knowledge-tracker.js: Purpose, API, usage example
       - dramatic-irony-panel.js: Purpose, API, usage example
       - scene-editor.js enhancements: Reader knowledge section
    6. Advanced Components (Phase 12):
       - relationship-map.js: Purpose, API (renderMap with Vis.js), usage example

    For each component:
    - Purpose: What problem it solves
    - API: Functions, parameters, return values
    - Usage Example: Real code snippet showing how to use
    - State Integration: How it interacts with global state
    - Events: What events it emits/listens to (if any)

    Reference actual code from components, not hypotheticals. Extract real function signatures and usage patterns.
  </action>
  <verify>COMPONENT_GUIDE.md exists, contains sections for all 13+ components with examples</verify>
  <done>Component guide complete with purpose, API, examples, and state integration for all components</done>
</task>

<task type="auto">
  <name>Task 2: Create NARRATIVE_EDITING_GUIDE.md</name>
  <files>NARRATIVE_EDITING_GUIDE.md</files>
  <action>
    Create comprehensive guide for drag-and-drop narrative editing workflow.

    Structure:
    1. Introduction
       - What is narrative-tree-editor
       - What workflows it supports
       - When to use vs other screens

    2. Reordering Workflow
       - How drag-and-drop works (HTML5 Drag API)
       - Visual feedback during drag
       - Auto-renumbering after drop
       - Chapters vs scenes
       - Step-by-step instructions with screenshots described

    3. Split Chapter Operation
       - What split does (Chapter 3 → Chapter 3 + 4)
       - When to use (restructuring narrative)
       - How renumbering works (4 → 5, 5 → 6)
       - Step-by-step instructions

    4. Merge Chapter Operation
       - What merge does (Chapter 2 + 3 → Chapter 2)
       - When to use (combining chapters)
       - How renumbering works (4 → 3, 5 → 4)
       - Step-by-step instructions

    5. Rename/Delete Operations
       - Rename chapter (shows limitation message)
       - Delete chapter (with scene count warning)
       - Confirmation dialogs

    6. Best Practices
       - When to reorder vs create new
       - Chapter grouping strategies
       - Handling "unassigned" scenes

    7. Implementation Details
       - API endpoints used (/api/scenes/reorder, /api/chapters/split, etc.)
       - State updates after operations
       - Error handling

    Reference narrative-tree-editor.js implementation. Extract real workflow steps from code.
  </action>
  <verify>NARRATIVE_EDITING_GUIDE.md exists, documents all operations with step-by-step instructions</verify>
  <done>Narrative editing guide complete with workflows, examples, best practices, and implementation details</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] COMPONENT_GUIDE.md exists with 13+ component sections
- [ ] Each component has purpose, API, usage example
- [ ] NARRATIVE_EDITING_GUIDE.md exists with all workflow operations
- [ ] Both documents reference actual code, not hypotheticals
- [ ] Markdown formatting is valid
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- COMPONENT_GUIDE.md documents all v4.1 components
- NARRATIVE_EDITING_GUIDE.md documents drag-and-drop workflow
- Documentation references real code from codebase
</success_criteria>

<output>
After completion, create `.planning/phases/14-documentation/14-01-SUMMARY.md`
</output>
